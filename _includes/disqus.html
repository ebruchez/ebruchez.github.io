<!--
  The Disqus lazy loading.
-->

<div id="disqus_thread" class="pt-2 pb-2">
  <p class="text-center text-muted small mb-5">
    Comments powered by <a href="https://disqus.com/">Disqus</a>.
  </p>
</div>

<script type="text/javascript">
  var disqus_config = function () {
    this.page.title = '{{ page.title }}';
    {% if page.blogger_orig_url %}
    this.page.url = '{{ page.blogger_orig_url }}';
    {% else %}
    this.page.identifier = '{{ page.url }}';
    {% endif %}
  };

  /* Lazy loading */

  var disqus_observer = new IntersectionObserver(function (entries) {
    if(entries[0].isIntersecting) {
        (function () {
            var d = document, s = d.createElement('script');
            s.src = 'https://{{ site.disqus.shortname }}.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();

        disqus_observer.disconnect();
    }
  }, { threshold: [0] });

  disqus_observer.observe(document.querySelector("#disqus_thread"));
</script>
