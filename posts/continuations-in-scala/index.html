<!DOCTYPE html><html lang="en" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Continuations in Scala (without a PhD)" /><meta name="author" content="Erik Bruchez" /><meta property="og:locale" content="en_US" /><meta name="description" content="With @avernet we have been thinking lately about continuations, for a few reasons:" /><meta property="og:description" content="With @avernet we have been thinking lately about continuations, for a few reasons:" /><link rel="canonical" href="https://blog.bruchez.name/posts/continuations-in-scala/" /><meta property="og:url" content="https://blog.bruchez.name/posts/continuations-in-scala/" /><meta property="og:site_name" content="Erik’s Ponderings" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2011-09-17T16:15:00-07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Continuations in Scala (without a PhD)" /><meta name="twitter:site" content="@ebruchez" /><meta name="twitter:creator" content="@Erik Bruchez" /><meta name="google-site-verification" content="irueyGKya5E07oltkTU3FJThmPxkQy-n1W1GOClvPIQ" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Erik Bruchez"},"dateModified":"2021-02-02T23:28:16-08:00","datePublished":"2011-09-17T16:15:00-07:00","description":"With @avernet we have been thinking lately about continuations, for a few reasons:","headline":"Continuations in Scala (without a PhD)","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.bruchez.name/posts/continuations-in-scala/"},"url":"https://blog.bruchez.name/posts/continuations-in-scala/"}</script><title>Continuations in Scala (without a PhD) | Erik's Ponderings</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/public/headshot.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Erik's Ponderings</a></div><div class="site-subtitle font-italic">A blog and More</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/pages/" class="nav-link"> <i class="fa-fw fas fa-file ml-xl-3 mr-xl-3 unloaded"></i> <span>PAGES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/ebruchez" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/ebruchez" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['erik','bruchez.org'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://feeds.feedburner.com/EriksPondering" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Continuations in Scala (without a PhD)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Continuations in Scala (without a PhD)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Sep 17, 2011, 4:15 PM -0700" > Sep 17, 2011 <i class="unloaded">2011-09-17T16:15:00-07:00</i> </span> by <span class="author"> Erik Bruchez </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Tue, Feb 2, 2021, 11:28 PM -0800" > Feb 2, 2021 <i class="unloaded">2021-02-02T23:28:16-08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1288 words">7 min</span></div><div class="post-meta mb-3"> <a href='/categories/programming/'>Programming</a></div></div><div class="post-content"><p>With <a href="https://twitter.com/avernet">@avernet</a> we have been thinking lately about <a href="https://en.wikipedia.org/wiki/Continuation">continuations</a>, for a few reasons:</p><ul><li>Continuations pop up on the web as a concept that could help with event-based programming<li>Scala has a continuations plugin, and we’re wondering what the deal is with that.<li>It just seems like fun to try to understand this (alongside things like monads).</ul><p>The main idea of continuations is the ability to interrupt a program, save its control state, and resume it at a later point in time.</p><p>One thing to realize is that there are many ways to implement this idea and variations around it. Google a bit and you will find a lot of material on continuations, some of which goes deep into computer science. Here we don’t care about the big picture: we just want to get at least some insight into Scala continuations.</p><p>The main source of information on Scala continuations is the <a href="http://infoscience.epfl.ch/record/149136/files/icfp113-rompf.pdf">EPFL paper</a> describing how continuations were designed in the Scala compiler. But if you google “scala continuations” and hope to find right away a clear explanation, you might be disappointed. You will find the following example (I am not kidding):</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">reset</span> <span class="o">{</span>
  <span class="n">shift</span> <span class="o">{</span> <span class="n">k</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span> <span class="o">=&gt;</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="nf">k</span><span class="o">(</span><span class="nf">k</span><span class="o">(</span><span class="nf">k</span><span class="o">(</span><span class="mi">7</span><span class="o">)))</span>
  <span class="o">}</span> <span class="o">+</span> <span class="mi">1</span>
<span class="o">}</span> <span class="o">*</span> <span class="mi">2</span>
</pre></table></code></div></div><p>This proudly produces the flamboyant result: 20. As a <a href="http://www.scala-lang.org/old/node/2096">commenter says</a>, “these are convoluted ways of adding numbers and I have no idea what is being gained or accomplished”. <a href="https://twitter.com/djspiewak">@djspiewak</a> echoes this when <a href="http://assets.en.oreilly.com/1/event/45/High%20Wizardry%20in%20the%20Land%20of%20Scala%20Presentation.pdf">he says</a> that continuations in Scala are “powerful …but useless”. It’s a bit like explaining how a combustion engine works, but not that it could be used to, say, move your car from home to work.</p><p>So let’s try to look at something concrete. Imagine a <code class="language-plaintext highlighter-rouge">read()</code> function which returns a byte from the network:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">read</span><span class="k">:</span> <span class="kt">Byte</span>
</pre></table></code></div></div><p>This is typically the signature of a synchronous (blocking) function. After all, it has a return value and in normal programming languages, that means waiting for that value to be available. A program that reads two bytes in a row and prints them looks like this:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">val</span> <span class="nv">byte1</span> <span class="k">=</span> <span class="n">read</span>
<span class="nf">println</span><span class="o">(</span><span class="s">"byte1 = "</span> <span class="o">+</span> <span class="n">byte1</span><span class="o">)</span>
<span class="k">val</span> <span class="nv">byte2</span> <span class="k">=</span> <span class="n">read</span>
<span class="nf">println</span><span class="o">(</span><span class="s">"byte2 = "</span> <span class="o">+</span> <span class="n">byte2</span><span class="o">)</span>
</pre></table></code></div></div><p>The issue is that in a web browser or node.js or any other single-threaded, event-driven environment, this is not acceptable: you simply cannot block for a long time, otherwise nothing else can happen in the system. So instead, the <code class="language-plaintext highlighter-rouge">read()</code> function is made to take a callback, something like:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">read</span><span class="o">(</span><span class="n">callback</span><span class="k">:</span> <span class="kt">Byte</span> <span class="o">=&gt;</span> <span class="nc">Unit</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span>
</pre></table></code></div></div><p>You must now write your program like this:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">read</span> <span class="o">{</span> <span class="n">byte1</span> <span class="k">=&gt;</span>
  <span class="nf">println</span><span class="o">(</span><span class="s">"byte1 = "</span> <span class="o">+</span> <span class="n">byte1</span><span class="o">)</span>
  <span class="n">read</span> <span class="o">{</span> <span class="n">byte2</span> <span class="k">=&gt;</span>
    <span class="nf">println</span><span class="o">(</span><span class="s">"byte2 = "</span> <span class="o">+</span> <span class="n">byte2</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>The issue here is that you must write in a funny style, even with Scala’s lightweight syntax for closures. Note also how each callback typically causes a new level of indentation. Some programmers manage to get used to this style, but it does not represent the control flow in a very natural way, and the issue grows with the size of the program.</p><p>Enter Scala continuations:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nn">scala.util.continuations._</span>
<span class="n">reset</span> <span class="o">{</span>
  <span class="k">val</span> <span class="nv">byte1</span> <span class="k">=</span> <span class="nf">shift</span><span class="o">(</span><span class="n">read</span><span class="o">)</span>
  <span class="nf">println</span><span class="o">(</span><span class="s">"byte1 = "</span> <span class="o">+</span> <span class="n">byte1</span><span class="o">)</span>
  <span class="k">val</span> <span class="nv">byte2</span> <span class="k">=</span> <span class="nf">shift</span><span class="o">(</span><span class="n">read</span><span class="o">)</span>
  <span class="nf">println</span><span class="o">(</span><span class="s">"byte2 = "</span> <span class="o">+</span> <span class="n">byte2</span><span class="o">)</span>
<span class="o">}</span>
</pre></table></code></div></div><p>And voilà: you can write the program again in imperative style without callbacks and closures.</p><p>You notice the <code class="language-plaintext highlighter-rouge">reset</code> and <code class="language-plaintext highlighter-rouge">shift</code> constructs. These terms don’t make any sense to a newcomer, but they were introduced a long time ago in an academic paper so are reused in Scala. Basically, <code class="language-plaintext highlighter-rouge">reset</code> <em>delimits</em> the continuation. With full continuations, the entire rest of the program would be under control of the continuation, but here, whatever is before and after the <code class="language-plaintext highlighter-rouge">reset</code> block has nothing to do with continuations at all. (Also, <code class="language-plaintext highlighter-rouge">reset</code> can return a value, although here we don’t care about it.)</p><p><code class="language-plaintext highlighter-rouge">shift</code> is the construct that does the real magic. Mainly, it smartly hacks around to pass the <em>continuation</em>, that is a closure containing whatever-code-follow-shift-until-the-end-of-the-reset-block, to its body. If you run that closure, you actually run that code after the <code class="language-plaintext highlighter-rouge">shift</code>. If you store that closure somewhere, you gain the ability to decide when to run that code at a later point. This is the general idea of continuations: interrupt, then resume a program. Here it’s all done with functions and closures behind the scene.</p><p>To see how our example really works, let’s look a the control flow. First, how would you go about implementing the non-blocking <code class="language-plaintext highlighter-rouge">read()</code> function? Obviously it would have to work hand in hand with an asynchronous framework of some sort. Let’s say it’s roughly equivalent to something like this:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">var</span> <span class="n">myCallback</span><span class="k">:</span> <span class="kt">Byte</span> <span class="o">=&gt;</span> <span class="nc">Unit</span> <span class="k">=</span> <span class="kc">null</span>
<span class="k">def</span> <span class="nf">read</span><span class="o">(</span><span class="n">callback</span><span class="k">:</span> <span class="kt">Byte</span> <span class="o">=&gt;</span> <span class="nc">Unit</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="n">myCallback</span> <span class="k">=</span> <span class="n">callback</span>
</pre></table></code></div></div><p>The key here is that <code class="language-plaintext highlighter-rouge">read()</code> is passed a callback function. <code class="language-plaintext highlighter-rouge">read()</code> just stores the callback in a variable and then returns immediately. There is just no waiting. This simulates what a real async framework would do.</p><p>In our example, <code class="language-plaintext highlighter-rouge">shift</code> calls <code class="language-plaintext highlighter-rouge">read()</code> with the continuation as a callback, and as we have seen <code class="language-plaintext highlighter-rouge">read()</code> returns right away. But then what does <code class="language-plaintext highlighter-rouge">shift</code> do? Does it just hang around? No: <code class="language-plaintext highlighter-rouge">shift</code> returns right away as well, and then control continues right after the <code class="language-plaintext highlighter-rouge">reset</code> block, and control should then return to the async framework. So it’s as if the user program had paused just in the middle of calling <code class="language-plaintext highlighter-rouge">shift(read)</code>.</p><p>Now say that 5 minutes later, a byte (say <code class="language-plaintext highlighter-rouge">42</code>) is available from the network. The async framework figures this out, notices <code class="language-plaintext highlighter-rouge">myCallback</code> is registered, and so calls it with the value <code class="language-plaintext highlighter-rouge">42</code>. The result of calling the callback is to run the continuation, that is the code that follows the first <code class="language-plaintext highlighter-rouge">shift</code> runs, with <code class="language-plaintext highlighter-rouge">byte1</code> set to the value <code class="language-plaintext highlighter-rouge">42</code>. Did you see what happened there? It’s as if the user program had resumed. And in effect it has.</p><p>What happens next? There is a another <code class="language-plaintext highlighter-rouge">shift</code>, so the scenario repeats: a new continuation is stored into <code class="language-plaintext highlighter-rouge">myCallback</code>. This time, it contains the code after the second <code class="language-plaintext highlighter-rouge">shift</code>. <code class="language-plaintext highlighter-rouge">read()</code> returns, <code class="language-plaintext highlighter-rouge">shift</code> returns, and control returns to the async framework, this time via the call to the initial callback. When the framework receives another byte from the network, the user program runs up to the end of the <code class="language-plaintext highlighter-rouge">reset</code> block and has in effect terminated. We are happy because:</p><ol><li>We never blocked our single thread.<li>We wrote the program in a clear, understandable style.<li>We actually did something (read and processed bytes from the network)</ol><p>Obviously to make this real you want a framework and a function library with a set of useful asynchronous functions besides <code class="language-plaintext highlighter-rouge">read()</code>. Also, note that you can hide the use of <code class="language-plaintext highlighter-rouge">shift</code> from the programmer, and expose the read function like:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">aRead</span> <span class="k">=</span> <span class="nf">shift</span><span class="o">(</span><span class="n">read</span><span class="o">)</span>
</pre></table></code></div></div><p>And the program becomes:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">reset</span> <span class="o">{</span>
  <span class="k">val</span> <span class="nv">byte1</span> <span class="k">=</span> <span class="n">aRead</span>
  <span class="nf">println</span><span class="o">(</span><span class="s">"byte1 = "</span> <span class="o">+</span> <span class="n">byte1</span><span class="o">)</span>
  <span class="k">val</span> <span class="nv">byte2</span> <span class="k">=</span> <span class="n">aRead</span>
  <span class="nf">println</span><span class="o">(</span><span class="s">"byte2 = "</span> <span class="o">+</span> <span class="n">byte2</span><span class="o">)</span>
<span class="o">}</span>
</pre></table></code></div></div><p>By the way, it also works within while loops. With this specific use of continuations where <code class="language-plaintext highlighter-rouge">shift</code> never calls the continuation directly, control unwinds the stack back to the top, and there is no stack explosion. This is good news:</p><div class="language-scala highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">reset</span> <span class="o">{</span>
  <span class="k">var</span> <span class="n">value</span> <span class="k">=</span> <span class="o">-</span><span class="mi">1</span>
  <span class="nf">while</span> <span class="o">(</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">42</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">value</span> <span class="k">=</span> <span class="n">aRead</span>
    <span class="nf">println</span><span class="o">(</span><span class="n">value</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="nf">println</span><span class="o">(</span><span class="s">"done"</span><span class="o">)</span>
<span class="o">}</span>

</pre></table></code></div></div><p>So I would say that this at least appears to be a very useful (if not mainstream at this point) use of continuations in Scala. They will become even more useful when used as part of a <a href="http://infoscience.epfl.ch/record/148043/files/DeprecatingObserversTR2010.pdf">reactive programming DSL</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Updates</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/vail-resorts-epic-coverage-declined/">Beware of Vail Resorts' Epic Coverage</a><li><a href="/posts/restoring-ibm-memory-typewriter-1/">Restoring an IBM Memory Typewriter - Part 1</a><li><a href="/posts/apple-1-reproduction-part-7-audio-cassette-adapter/">Building an Apple-1 Reproduction in 2024/2025 - Part 7: The Audio Cassette Adapter</a><li><a href="/posts/apple-1-reproduction-part-6-c-programming/">Building an Apple-1 Reproduction in 2024/2025 - Part 6: C Programming</a><li><a href="/posts/apple-1-reproduction-part-3-retro-chip-tester/">Building an Apple-1 Reproduction in 2024 - Part 3: The Retro Chip Tester</a></ul></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/scala-partial-functions-without-phd/"><div class="card-body"> <span class="timeago small" > Oct 15, 2011 <i class="unloaded">2011-10-15T12:54:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Scala partial functions (without a PhD)</h3><div class="text-muted small"><p> If you have done some Scala for a while, you know about pattern matching and match/case. Things like: 1 2 3 4 value match { case Some(value) =&gt; … case None =&gt; … } But there is another ...</p></div></div></a></div><div class="card"> <a href="/posts/scala-tip-import-renames/"><div class="card-body"> <span class="timeago small" > Jun 18, 2012 <i class="unloaded">2012-06-18T16:44:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Scala tip: import renames</h3><div class="text-muted small"><p> In Java, you often write things like this, which are rather verbose: 1 2 URLEncoder.encode(...) URLDecoder.decode(...) Since Java 1.5 you can use static imports, but then you are stuck with the ...</p></div></div></a></div><div class="card"> <a href="/posts/scala-tip-getorelseupdate/"><div class="card-body"> <span class="timeago small" > Jun 30, 2012 <i class="unloaded">2012-06-30T09:24:00-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Scala tip: getOrElseUpdate</h3><div class="text-muted small"><p> I found myself recently looking at the following code which I wrote when I was getting started with Scala: 1 2 3 4 5 6 7 8 def getModelState(modelPrefixedId: String) = modelStates.get(modelPrefi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/48-hours-of-nexus-one/" class="btn btn-outline-primary" prompt="Older"><p>48 hours of Nexus One</p></a> <a href="/posts/scala-partial-functions-without-phd/" class="btn btn-outline-primary" prompt="Newer"><p>Scala partial functions (without a PhD)</p></a></div><div id="disqus_thread"><p class="text-center text-muted small">Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script> var disqus_config = function() { this.page.url = 'https://blog.bruchez.name/posts/continuations-in-scala/'; this.page.identifier = '/posts/continuations-in-scala/'; }; (function() { var d = document; var s = d.createElement('script'); s.src = 'https://ebruchez.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="">Erik Bruchez</a>.</p></div><div class="footer-right"><p class="mb-0"></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://blog.bruchez.name{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
